import a,{useMemo as t,useState as r,useRef as e,useEffect as s}from"react";import{useDOMRef as i}from"../utils/dom";import{__DEV__ as n}from"../utils/assertion";import o from"./avatar.styles";import l from"../utils/clsx";import{jsx as m}from"react/jsx-runtime";import{jsxs as c}from"react/jsx-runtime";const u=a=>(null==a?void 0:a.length)<=4?a:null==a?void 0:a.slice(0,3);export const Avatar=a.forwardRef(((a,n)=>{const{src:v,text:x,icon:d,alt:p,className:f,...N}=a,g=i(n),y=!v,[A,h]=r(!1),j=e(null);s((()=>{var a;(null==j||null==(a=j.current)?void 0:a.complete)&&h(!0)}),[]);const b=t((()=>!A&&v?"loading":"ready"),[v,A]);return c(o,{ref:g,className:l({"only-text-avatar":y},f),"data-state":b,...N,children:[m("span",{className:"nextui-avatar-bg"}),!y&&m("img",{ref:j,className:l("nextui-avatar-img",`nextui-avatar--${b}`,{"nextui-avatar-ready":A}),src:v,alt:p,"data-state":b,onLoad:()=>h(!0)}),y&&!d&&x&&m("span",{className:"nextui-avatar-text",children:u(x)}),d&&m("span",{className:"nextui-avatar-icon",children:d})]})}));n&&(Avatar.displayName="NextUI.Avatar"),Avatar.toString=()=>".nextui-avatar";export default Avatar;