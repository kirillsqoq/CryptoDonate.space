var e=require("@babel/runtime/helpers/interopRequireDefault");exports.__esModule=!0,exports.default=exports.Image=void 0;var t=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=f(t);if(r&&r.has(e))return r.get(e);var a={},u=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var i=u?Object.getOwnPropertyDescriptor(e,s):null;i&&(i.get||i.set)?Object.defineProperty(a,s,i):a[s]=e[s]}a.default=e,r&&r.set(e,a);return a}(require("react")),r=e(require("./image.skeleton")),a=e(require("../use-real-shape")),u=e(require("../use-current-state")),s=e(require("../use-resize")),i=require("../utils/dom"),o=require("../utils/assertion"),n=require("./image.styles"),l=e(require("../utils/clsx")),c=require("react/jsx-runtime");function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(f=function(e){return e?r:t})(e)}const d=t.default.forwardRef(((e,o)=>{const{src:f,width:d,height:m,showSkeleton:p,className:g,maxDelay:h,autoResize:y,objectFit:x,containerCss:w,css:b,...j}=e,q=(0,i.useDOMRef)(o),[v,O]=(0,t.useState)(!0),[M,_]=(0,t.useState)(p),{w:D,h:S}=(0,t.useMemo)((()=>({w:d?"number"==typeof d?`${d}px`:d:"auto",h:m?"number"==typeof m?`${m}px`:m:"auto"})),[d,m]),[k,I,N]=(0,u.default)(S),[P,R]=(0,a.default)(q),E=p&&!!d&&!!m;(0,t.useEffect)((()=>{q.current&&q.current.complete&&(O(!1),_(!1))})),(0,t.useEffect)((()=>{const e=setTimeout((()=>{E&&_(!1),clearTimeout(e)}),h);return()=>clearTimeout(e)}),[v]),(0,t.useEffect)((()=>{if(!y)return;const e=0===P.width,t="auto"===N.current;!e&&d&&m&&(P.width<d?!t&&I("auto"):t&&I(S))}),[P,d]),(0,s.default)((()=>{y&&R()}));const z=(0,t.useMemo)((()=>v?"loading":"ready"),[v]);return(0,c.jsxs)(n.StyledImageContainer,{className:(0,l.default)("nextui-image-container",`nextui-image--${z}`,g),"data-state":z,ready:!v||M,css:{width:D,height:k,...w},children:[M&&(0,c.jsx)(r.default,{opacity:1}),(0,c.jsx)(n.StyledImage,{ref:q,className:"nextui-image",width:d,height:m,onLoad:()=>{O(!1)},src:f,"data-state":z,alt:e.alt||"",css:{objectFit:x,...b},...j})]})}));exports.Image=d,o.__DEV__&&(d.displayName="NextUI.Image"),d.toString=()=>".nextui-image",d.defaultProps={showSkeleton:!0,autoResize:!1,objectFit:"scale-down",maxDelay:3e3,className:""};var m=t.default.memo(d);exports.default=m;