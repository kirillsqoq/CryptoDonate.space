System.register(["react","proxy-compare","valtio/vanilla"],function(g){"use strict";var h,C,R,_,d,W,b,V,T,M,x,A;return{setters:[function(t){h=t.useRef,C=t.useState,R=t.useEffect,_=t.useReducer,d=t.useCallback,W=t.useMemo,b=t.useLayoutEffect},function(t){V=t.isChanged,T=t.createProxy},function(t){M=t.snapshot,x=t.subscribe,A=t.getVersion,g({getVersion:t.getVersion,proxy:t.proxy,ref:t.ref,snapshot:t.snapshot,subscribe:t.subscribe,unstable_getHandler:t.getHandler})}],execute:function(){g("useSnapshot",G);const t="_uMS_T",k="_uMS_V";function L(n,e){return{[t]:n,[k]:e}}function U(n,e,a){const o=h(),u=n[k](n[t]),[r,c]=C(()=>[n,e,a,u,e(n[t])]);let i=r[4];return r[0]!==n||r[1]!==e||r[2]!==a?(i=e(n[t]),c([n,e,a,u,i])):u!==r[3]&&u!==o.current&&(i=e(n[t]),Object.is(i,r[4])||c([n,e,a,u,i])),R(()=>{let w=!1;const y=()=>{if(!w)try{const f=e(n[t]),S=n[k](n[t]);o.current=S,c(s=>s[0]!==n||s[1]!==e||s[2]!==a||Object.is(s[4],f)?s:[s[0],s[1],s[2],S,f])}catch{c(S=>[...S])}},E=a(n[t],y);return y(),()=>{w=!0,E()}},[n,e,a]),i}const I=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?R:b,l=new WeakMap,p=n=>(l.has(n)||l.set(n,L(n,A)),l.get(n));function G(n,e){const a=_(f=>f+1,0)[1],o=new WeakMap,u=h(),r=h(),c=h();I(()=>{c.current=r.current=M(n)},[n]),I(()=>{u.current=o,r.current!==c.current&&V(r.current,c.current,o,new WeakMap)&&(r.current=c.current,a())});const i=e==null?void 0:e.sync,w=d((f,S)=>x(f,()=>{const s=M(f);c.current=s;try{if(u.current&&!V(r.current,s,u.current,new WeakMap))return}catch{}r.current=s,S()},i),[i]),y=U(p(n),M,w),E=W(()=>new WeakMap,[]);return T(y,o,E)}}}});
